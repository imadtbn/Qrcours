<!DOCTYPE html><html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ù…Ø³Ø­ QR ÙˆØªØ­Ø±ÙŠØ±Ù‡</title>
  <script src="https://unpkg.com/html5-qrcode" type="text/javascript"></script>
  <style>
    body {
      font-family: 'Cairo', sans-serif;
      background-color: #e6f2ec;
      padding: 20px;
      text-align: center;
      color: #004d26;
    }
    input, button, textarea {
      margin: 10px;
      padding: 10px;
      font-size: 1em;
      border: 1px solid #006633;
      border-radius: 5px;
    }
    button {
      background-color: #00994d;
      color: white;
      cursor: pointer;
      font-size: 0.9em;
      padding: 6px 10px;
      display: inline-block;
    }
    button:hover {
      background-color: #007a3d;
    }
    .button-group {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 6px;
      margin-bottom: 10px;
    }
    #reader {
      margin: auto;
      width: 100%;
      max-width: 400px;
      border: 2px solid #00994d;
      border-radius: 8px;
    }
    #qrcode canvas {
      margin-top: 10px;
      border: 1px solid #00994d;
      padding: 5px;
      background-color: white;
    }
  </style>
</head>
<body>
  <h1>ğŸ“± Ù‚Ø§Ø±Ø¦ ÙˆÙ…Ø­Ø±Ø± ÙƒÙˆØ¯ QR</h1>
  <p><strong>Ø§Ù„Ø£Ø³ØªØ§Ø° Ù…Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯ØŒ Ø£Ø³ØªØ§Ø° Ø§Ù„Ø¹Ù„ÙˆÙ… Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠØ©</strong></p>  <div id="reader"></div>
  <div class="button-group">
    <button onclick="stopCamera()">ğŸ”´ ØºÙ„Ù‚ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§</button>
    <button onclick="startCamera()">ğŸ“· ÙØªØ­ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§</button>
    <button onclick="rescan()">ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø³Ø­</button>
  </div>  <textarea id="scanned-result" rows="5" cols="40" placeholder="Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù…Ø³Ø­ Ø£Ùˆ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù…ÙØ­Ø±Ø±..."></textarea>  <br>
  <button onclick="saveCode()">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„ÙƒÙˆØ¯</button>
  <button onclick="sendCodeByEmail()">ğŸ“© Ø¥Ø±Ø³Ø§Ù„ Ø¹Ø¨Ø± Ø§Ù„Ø¨Ø±ÙŠØ¯</button>  <h3>ğŸ”§ ØªÙˆÙ„ÙŠØ¯ ÙƒÙˆØ¯ QR Ø¬Ø¯ÙŠØ¯</h3>
  <form id="qrForm">
    <input type="text" id="name" placeholder="Ø§Ù„Ø§Ø³Ù… ÙˆØ§Ù„Ù„Ù‚Ø¨" required /><br>
    <input type="text" id="level" placeholder="Ø§Ù„Ø·ÙˆØ± Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ" required /><br>
    <input type="tel" id="phone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ" required /><br>
    <input type="email" id="email" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ" required /><br>
    <button type="button" onclick="generateQRCode()">ğŸ†• ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ÙƒÙˆØ¯</button>
    <button type="button" onclick="sendGeneratedQRByEmail()">ğŸ“¤ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù…ÙˆÙ„Ù‘Ø¯ Ø¹Ø¨Ø± Ø§Ù„Ø¨Ø±ÙŠØ¯</button>
  </form>
  <div id="qrcode"></div>  <script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>  <script>
    let scanner;
    const resultField = document.getElementById("scanned-result");

    function startCamera() {
      scanner = new Html5Qrcode("reader");
      scanner.start({ facingMode: "environment" }, { fps: 10, qrbox: 250 }, onScanSuccess);
    }

    function stopCamera() {
      if (scanner) {
        scanner.stop().then(() => scanner.clear());
      }
    }

    function rescan() {
      stopCamera();
      setTimeout(startCamera, 500);
    }

    function onScanSuccess(decodedText) {
      resultField.value = decodedText;
      stopCamera();
    }

    function saveCode() {
      const blob = new Blob([resultField.value], { type: "text/plain;charset=utf-8" });
      const link = document.createElement("a");
      link.href = URL.createObjectURL(blob);
      link.download = "qr_code.txt";
      link.click();
    }

    function generateQRCode() {
      const name = document.getElementById("name").value;
      const level = document.getElementById("level").value;
      const phone = document.getElementById("phone").value;
      const email = document.getElementById("email").value;

      const data = `Ø§Ù„Ø§Ø³Ù…: ${name}\nØ§Ù„Ø·ÙˆØ±: ${level}\nØ§Ù„Ù‡Ø§ØªÙ: ${phone}\nØ§Ù„Ø¥ÙŠÙ…ÙŠÙ„: ${email}`;
      resultField.value = data;

      const qrcodeContainer = document.getElementById("qrcode");
      qrcodeContainer.innerHTML = "";
      const canvas = document.createElement("canvas");
      qrcodeContainer.appendChild(canvas);

      QRCode.toCanvas(canvas, data, function (error) {
        if (error) {
          alert("Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ÙƒÙˆØ¯");
          console.error(error);
        }
      });
    }

    function sendCodeByEmail() {
      const email = document.getElementById("email").value;
      const subject = encodeURIComponent("Ù…Ø´Ø§Ø±ÙƒØ© ÙƒÙˆØ¯ QR");
      const body = encodeURIComponent(resultField.value);
      window.location.href = `mailto:${email}?subject=${subject}&body=${body}`;
    }

    function sendGeneratedQRByEmail() {
      const email = document.getElementById("email").value;
      const name = document.getElementById("name").value;
      const subject = encodeURIComponent("Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø®Ø§Øµ Ø¨Ø§Ù„Ø·Ø§Ù„Ø¨: " + name);
      const body = encodeURIComponent(resultField.value);
      window.location.href = `mailto:${email}?subject=${subject}&body=${body}`;
    }
  </script></body>
</html>
